name: Built tests on Linux (Gcc/Clang)

on: [push, pull_request]

env:
  BUILD_TYPE: Debug

jobs:
  Build-Tests:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Install GTest
        run: |
          sudo apt install -y libgtest-dev
          cd /usr/src/gtest
          sudo cmake CMakeLists.txt

      - name: Build tests
        run: |
          cmake -S . -B build -DCMAKE_BUILD_TYPE=${BUILD_TYPE} -DJacLib_BUILD_TESTS=ON
          cmake --build build

      - name: Run tests
        run: |
          ./build/tst/JacLib_tests
